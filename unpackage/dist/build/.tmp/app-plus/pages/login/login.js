(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{2026:function(e,n,t){"use strict";(function(e){t("29bd"),t("921b");o(t("66fd"));var n=o(t("fd54"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},2464:function(e,n,t){"use strict";t.r(n);var o=t("a8fd"),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);n["default"]=r.a},3016:function(e,n,t){"use strict";var o,r=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"b",function(){return r}),t.d(n,"c",function(){return i}),t.d(n,"a",function(){return o})},"56f6":function(e,n,t){"use strict";var o=t("630d"),r=t.n(o);r.a},"630d":function(e,n,t){},a8fd:function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=s(t("a34a")),i=s(t("2c1c")),u=s(t("dcec")),a=t("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,o,r,i,u){try{var a=e[i](u),s=a.value}catch(c){return void t(c)}a.done?n(s):Promise.resolve(s).then(o,r)}function f(e){return function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function u(e){c(i,o,r,u,a,"next",e)}function a(e){c(i,o,r,u,a,"throw",e)}u(void 0)})}}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){d(e,n,t[n])})}return e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var p={data:function(){return{phoneNumber:"",passwd:"",isShowOauth:!1,showProvider:{weixin:!1,qq:!1,sinaweibo:!1,xiaomi:!1}}},onShow:function(){},onLoad:function(e){this.isShowOauth=!0,e.phone&&(this.phoneNumber=e.phone||"")},methods:l({},(0,a.mapMutations)(["login"]),{goLogin:function(){this.$mRouter.push({route:this.$mRouterConfig.loginTest})},oauthLogin:function(n){e.showLoading(),e.login({provider:n,success:function(t){console.log(o("success: "+JSON.stringify(t)," at pages/login/login.vue:84")),e.getUserInfo({provider:n,success:function(n){console.log(o("用户信息："+JSON.stringify(n.userInfo)," at pages/login/login.vue:89")),e.setStorage({key:"UserInfo",data:{username:n.userInfo.nickName,face:n.userInfo.avatarUrl,signature:"个性签名",integral:0,balance:0,envelope:0},success:function(){e.hideLoading(),e.showToast({title:"登录成功",icon:"success"}),setTimeout(function(){e.navigateBack()},300)}})}})},fail:function(e){console.log(o("fail: "+JSON.stringify(e)," at pages/login/login.vue:112"))}})},getProvider:function(){var n=this;e.getProvider({service:"oauth",success:function(e){for(var t=e.provider.length,o=0;o<t;o++)n.showProvider[e.provider[o]]=!0;0==e.provider.length&&(n.isShowOauth=!1)}})},toPage:function(n){e.navigateTo({url:n})},toDoLogin:function(){var n=f(r.default.mark(function n(){var t,o,a;return r.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(t=this,t.phoneNumber=t.phoneNumber.trim(),t.passwd=t.passwd.trim(),!t.phoneNumber||""!=t.phoneNumber){n.next=6;break}return t.$api.msg("请输入手机号"),n.abrupt("return",!1);case 6:if(u.default.regularTools.isPhone(t.phoneNumber)){n.next=9;break}return t.$api.msg("请输入正确的手机号"),n.abrupt("return",!1);case 9:if(!t.passwd||""!=t.passwd){n.next=12;break}return t.$api.msg("请输入密码"),n.abrupt("return",!1);case 12:if(!(t.passwd.length<6)){n.next=15;break}return t.$api.msg("密码错误"),n.abrupt("return",!1);case 15:return t.loading=!0,o={PHONE:t.phoneNumber,PASSWORD:t.passwd},e.showLoading({title:"登录中..."}),n.next=20,i.default.post("/userImpl/appLogin",o);case 20:a=n.sent,this.login(a.data.userInfo),this.$api.msg("登录成功",1500,!0,"success"),setTimeout(function(){t.$mRouter.reLaunch({route:t.$mRouterConfig.index})},300);case 24:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),doLogin:function(){var n=f(r.default.mark(function n(){var t,o,i;return r.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return e.hideKeyboard(),e.showLoading({title:"提交中..."}),this.logining=!0,t=this.mobile,o=this.password,{mobile:t,password:o},n.next=7,this.$api.json("userInfo");case 7:i=n.sent,1===i.status?(this.login(i.data),e.navigateBack()):(this.$api.msg(i.msg),this.logining=!1),setTimeout(function(){e.showToast({title:"登录成功",icon:"success"})},200);case 10:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}()})};n.default=p}).call(this,t("6e42")["default"],t("0de9")["default"])},fd54:function(e,n,t){"use strict";t.r(n);var o=t("3016"),r=t("2464");for(var i in r)"default"!==i&&function(e){t.d(n,e,function(){return r[e]})}(i);t("56f6");var u,a=t("f0c5"),s=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);n["default"]=s.exports}},[["2026","common/runtime","common/vendor"]]]);