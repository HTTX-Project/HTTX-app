(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"037e":function(t,e,n){"use strict";var r=n("b0da"),o=n.n(r);o.a},"0f0c":function(t,e,n){"use strict";n.r(e);var r=n("b839"),o=n("374d");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("037e");var i,d=n("f0c5"),u=Object(d["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=u.exports},"374d":function(t,e,n){"use strict";n.r(e);var r=n("d5f2"),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=o.a},b0da:function(t,e,n){},b839:function(t,e,n){"use strict";var r,o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){1==t.item.PAY_TYPE?t.onLinePay(t.item):t.orderPay(t.item)})},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return r})},d27d:function(t,e,n){"use strict";(function(t){n("29bd"),n("921b");r(n("66fd"));var e=r(n("0f0c"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},d5f2:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("2c1c"));function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"7fe9"))},d=function(){return n.e("components/empty").then(n.bind(null,"8232"))},u={components:{uniLoadMore:i,empty:d},data:function(){return{tabCurrentIndex:0,navList:[{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"已发货",loadingType:"more",orderList:[]},{state:3,text:"已完成",loadingType:"more",orderList:[]},{state:4,text:"已取消",loadingType:"more",orderList:[]}],user:{},url:{}}},onLoad:function(t){this.user=this.$store.state.userInfo,this.url=this.$store.state.imgUrl,this.tabCurrentIndex=+t.state,this.loadData()},methods:{loadData:function(e){var n=this,a=this,i=this.tabCurrentIndex,d=this.navList[i];d.state;if("loading"!==d.loadingType){t.showLoading({mask:!0}),d.loadingType="loading";var u="";u=0==a.tabCurrentIndex?"/orderImpl/orderList?USER_ID=".concat(this.user.USER_ID,"&PAY_STATUS=1&ORDER_STATUS="):1==a.tabCurrentIndex?"/orderImpl/orderList?USER_ID=".concat(this.user.USER_ID,"&ORDER_STATUS=1&PAY_STATUS="):2==a.tabCurrentIndex?"/orderImpl/orderList?USER_ID=".concat(this.user.USER_ID,"&ORDER_STATUS=3&PAY_STATUS="):"/orderImpl/orderList?USER_ID=".concat(this.user.USER_ID,"&ORDER_STATUS=2&PAY_STATUS="),a.orderList=[],d.orderList=[],o.default.get(u,[]).then(function(t){a.orderList=t.data.orderList,d.orderList=a.orderList,console.log(r("orderList",a.orderList," at pages/order/order.vue:197"))}).catch(function(t){console.log(r("order查询失败",t," at pages/order/order.vue:199"))}).finally(function(){n.$set(d,"loaded",!0),d.loadingType="more",t.hideLoading({})})}},changeTab:function(t){this.tabCurrentIndex=t.target.current,this.loadData("tabChange")},tabClick:function(t){this.tabCurrentIndex=t},goPingJia:function(t,e){this.$mRouter.push({route:this.$mRouterConfig.pingjia,query:{oId:t.USER_ID,gId:e.GOOD_ID}})},goWuLiu:function(t){t.EMS_CODE&&""!=t.EMS_CODE?this.$mRouter.push({route:this.$mRouterConfig.kuaidi}):this.$api.msg("无物流单号")},deleteOrder:function(e){var n=this;t.showLoading({title:"请稍后"}),setTimeout(function(){n.navList[n.tabCurrentIndex].orderList.splice(e,1),t.hideLoading()},600)},cancelOrder:function(e){var n=this;t.showLoading({title:"请稍后",mask:!0}),t.showModal({content:"确定要取消订单吗?",success:function(a){a.confirm&&o.default.get("/orderImpl/editOrder?USER_ID=".concat(e.USER_ID,"&ORDER_CODE=").concat(e.ORDER_CODE,"&ORDER_STATUS=2"),{}).then(function(t){n.$api.msg("取消订单成功",1500,!0,"success"),n.loadData()}).catch(function(t){console.log(r("取消订单报错",t," at pages/order/order.vue:260"))}).finally(function(){t.hideLoading({})})}})},onLinePay:function(){console.log(r("在线支付"," at pages/order/order.vue:269"))},orderPay:function(e){var n=this;t.showLoading({title:"请稍后",mask:!0}),o.default.get("/orderImpl/orderPay?USER_ID=".concat(n.user.USER_ID,"&ORDER_CODE=").concat(e.ORDER_CODE,"&PAY_TYPE=").concat(e.PAY_TYPE),{}).then(function(e){t.redirectTo({url:"/pages/money/paySuccess"})}).catch(function(t){console.log(r("订单支付失败",t," at pages/order/order.vue:282"))}).finally(function(){t.hideLoading({})})},orderStateExp:function(t){var e="",n="#fa436a";switch(+t){case 1:e="待付款";break;case 2:e="待发货";break;case 9:e="订单已关闭",n="#909399";break}return{stateTip:e,stateTipColor:n}}}};e.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["d27d","common/runtime","common/vendor"]]]);