(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{2903:function(t,e,n){"use strict";n.r(e);var o=n("47ad"),i=n("3828");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("75c8");var a,u=n("f0c5"),r=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=r.exports},"2dd7":function(t,e,n){"use strict";(function(t){n("29bd"),n("921b");o(n("66fd"));var e=o(n("2903"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},3828:function(t,e,n){"use strict";n.r(e);var o=n("a26f"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);e["default"]=i.a},"47ad":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isVideo=!1},t.e1=function(e){t.isVideo=!0})},s=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return o})},"75c8":function(t,e,n){"use strict";var o=n("9f11"),i=n.n(o);i.a},"9f11":function(t,e,n){},a26f:function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),s=a(n("2c1c"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,o,i,s,a){try{var u=t[s](a),r=u.value}catch(error){return void n(error)}u.done?e(r):Promise.resolve(r).then(o,i)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var s=t.apply(e,n);function a(t){u(s,o,i,a,r,"next",t)}function r(t){u(s,o,i,a,r,"throw",t)}a(void 0)})}}var c=function(){return n.e("components/share").then(n.bind(null,"392e"))},d=function(){return n.e("components/uni-number-box").then(n.bind(null,"556a"))},f=function(){return n.e("components/yy-video-player/yy-video-player").then(n.bind(null,"8596"))},l={components:{share:c,uniNumberBox:d,yyVideoPlayer:f},data:function(){return{videoUrl:"http://vt1.doubanio.com/201910131716/ff3b54448cd1c56470bfb9ff1451922c/view/movie/M/402300311.mp4",poster:"https://img3.doubanio.com/img/trailer/medium/2520459021.jpg",danmuList:[{text:"好商品",color:"#fff",time:3}],isVideo:!1,url:"",goodInfo:[],specClass:"none",specSelected:[],favorite:!0,shareList:[],num:1,imgList:[],canBuy:!1,nMin:1,nMax:99,demoImg:"",isBuy:!1,commentCon:null,isVideoSta:!1}},onLoad:function(){var e=r(i.default.mark(function e(n){var a,u;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,this.user=this.$store.state.userInfo,this.url=this.$store.state.imgUrl,u=n.id,u&&this.$api.msg("点击了".concat(u)),t.showLoading({}),s.default.get("/goodImpl/goodInfo?GOOD_ID=".concat(u,"&USER_ID=").concat(a.user.USER_ID),[]).then(function(t){a.goodInfo=t.data.goodInfo,a.goodInfo.VIDEO_PATH&&""!=a.goodInfo.VIDEO_PATH&&(a.videoUrl=a.url+"/"+a.goodInfo.VIDEO_PATH,a.poster=a.url+"/"+a.goodInfo.IMAGES_LIST[0].PATH,a.isVideoSta=!0),a.imgList=t.data.goodInfo.IMAGES_LIST,a.canBuy=1==t.data.canBuy,a.demoImg=t.data.goodInfo.DEMO_IMAGES_LIST&&t.data.goodInfo.DEMO_IMAGES_LIST.PATH?a.url+t.data.goodInfo.DEMO_IMAGES_LIST.PATH:""}).catch(function(t){console.log(o("商品详情",t," at pages/product/product.vue:242"))}).finally(function(){t.hideLoading({})}),s.default.get("/goodImpl/goodCommentList?GOOD_ID=".concat(u,"&USER_ID=&ORDER_ID="),[]).then(function(t){t.data.commentList.length>0&&(a.commentCon=t.data.commentList[t.data.commentList.length-1],console.log(o("commentCon",a.commentCon," at pages/product/product.vue:249")))}).catch(function(t){console.log(o("评价",error," at pages/product/product.vue:252"))}).finally(function(){t.hideLoading({})});case 8:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),methods:{toggleSpec:function(t){var e=this;this.isBuy=1==t,"show"===this.specClass?(this.specClass="hide",setTimeout(function(){e.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},numberChange:function(t){this.num=t.number},goPj:function(){this.$mRouter.push({route:this.$mRouterConfig.ratings,query:{id:this.goodInfo.USER_ID}})},selectSpec:function(t,e){var n=this,o=this.specChildList;o.forEach(function(t){t.pid===e&&n.$set(t,"selected",!1)}),this.$set(o[t],"selected",!0),this.specSelected=[],o.forEach(function(t){!0===t.selected&&n.specSelected.push(t)})},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.favorite=!this.favorite},buy:function(){this.specClass="none",this.$mRouter.push({route:this.$mRouterConfig.createOrder,query:{id:this.goodInfo.USER_ID,num:this.num}})},addCart:function(){var e=this,n=[],o=!1;n.push({goodsDetail:this.goodInfo,buyNumber:this.num,active:!0}),t.showLoading({mask:!0});var i=t.getStorageSync("shopCar"),s=!1,a=!0,u=!1,r=void 0;try{for(var c,d=i[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;if(s)break;if(f.goodsDetail.USER_ID==n[0].goodsDetail.USER_ID){s=!0;break}}}catch(l){u=!0,r=l}finally{try{a||null==d.return||d.return()}finally{if(u)throw r}}if(s)return e.$api.msg("商品已在购物车"),e.specClass="hide",setTimeout(function(){e.specClass="none"},250),!1;o||""==i||(n=n.concat(i)),t.setStorage({key:"shopCar",data:n,success:function(){t.hideLoading(),e.$api.msg("加入购物车成功",1500,!1,"success"),e.specClass="hide",setTimeout(function(){e.specClass="none"},250)}})},stopPrevent:function(){}}};e.default=l}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["2dd7","common/runtime","common/vendor"]]]);